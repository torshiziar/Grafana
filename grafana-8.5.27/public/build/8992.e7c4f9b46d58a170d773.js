"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8992],{"./public/app/core/components/Signup/SignupPage.tsx":(e,a,i)=>{i.r(a),i.d(a,{SignupPage:()=>u,default:()=>m});i("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js");var s,r=i("./packages/grafana-runtime/src/index.ts"),n=i("./packages/grafana-ui/src/index.ts"),o=i("./public/app/core/config.ts"),l=i("./public/app/core/copy/appNotification.ts"),d=i("./public/app/features/admin/utils.ts"),c=i("./public/app/core/components/Login/LoginLayout.tsx"),t=i("./public/app/core/components/PasswordField/PasswordField.tsx"),p=i("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const u=e=>{const a=(0,l.iG)(),i={email:e.queryParams.email,code:e.queryParams.code};return(0,p.jsx)(c.dd,{children:(0,p.jsx)(c.$s,{children:(0,p.jsx)(n.Form,{defaultValues:i,onSubmit:async e=>{""===e.name&&delete e.name,delete e.confirm;"redirect-to-select-org"===(await(0,r.getBackendSrv)().post("/api/user/signup/step2",{email:e.email,code:e.code,username:e.email,orgName:e.orgName,password:e.password,name:e.name}).catch((e=>{var i;const s=(null===(i=e.data)||void 0===i?void 0:i.message)||e;a.warning(s)}))).code&&window.location.assign((0,o.iE)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,o.iE)().appSubUrl+"/")},children:e=>{var a,i,r;let{errors:l,register:c,getValues:u}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.Field,{label:"Your name",children:(0,p.jsx)(n.Input,Object.assign({id:"user-name"},c("name"),{placeholder:"(optional)"}))}),(0,p.jsx)(n.Field,{label:"Email",invalid:!!l.email,error:null===(a=l.email)||void 0===a?void 0:a.message,children:(0,p.jsx)(n.Input,Object.assign({id:"email"},c("email",{required:"Email is required",pattern:{value:d.Yb,message:"Email is invalid"}}),{type:"email",placeholder:"Email"}))}),!(0,o.iE)().autoAssignOrg&&(0,p.jsx)(n.Field,{label:"Org. name",children:(0,p.jsx)(n.Input,Object.assign({id:"org-name"},c("orgName"),{placeholder:"Org. name"}))}),(0,o.iE)().verifyEmailEnabled&&(0,p.jsx)(n.Field,{label:"Email verification code (sent to your email)",children:(0,p.jsx)(n.Input,Object.assign({id:"verification-code"},c("code"),{placeholder:"Code"}))}),(0,p.jsx)(n.Field,{label:"Password",invalid:!!l.password,error:null==l||null===(i=l.password)||void 0===i?void 0:i.message,children:(0,p.jsx)(t.Z,Object.assign({id:"new-password",autoFocus:!0,autoComplete:"new-password"},c("password",{required:"Password is required"})))}),(0,p.jsx)(n.Field,{label:"Confirm password",invalid:!!l.confirm,error:null==l||null===(r=l.confirm)||void 0===r?void 0:r.message,children:(0,p.jsx)(t.Z,Object.assign({id:"confirm-new-password",autoComplete:"new-password"},c("confirm",{required:"Confirmed password is required",validate:e=>e===u().password||"Passwords must match!"})))}),(0,p.jsxs)(n.HorizontalGroup,{children:[s||(s=(0,p.jsx)(n.Button,{type:"submit",children:"Submit"})),(0,p.jsx)(n.LinkButton,{fill:"text",href:(0,o.iE)().appSubUrl+"/login",children:"Back to login"})]})]})}})})})},m=u}}]);
//# sourceMappingURL=8992.e7c4f9b46d58a170d773.js.map