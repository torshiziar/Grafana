"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7429],{"./public/app/features/invites/SignupInvited.tsx":(e,a,s)=>{s.r(a),s.d(a,{SignupInvitedPage:()=>h,default:()=>b});var n,r,i=s("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/index.js"),t=s("./.yarn/__virtual__/react-use-virtual-00326e70ba/3/opt/drone/yarncache/react-use-npm-17.3.2-a032cbeb01-7379460f51.zip/node_modules/react-use/esm/useAsync.js"),l=s("./packages/grafana-runtime/src/index.ts"),c=s("./packages/grafana-ui/src/index.ts"),o=s("./public/app/core/components/Page/Page.tsx"),d=s("./public/app/core/config.ts"),u=s("./public/app/core/core.ts"),m=s("./public/app/features/admin/utils.ts"),p=s("../../opt/drone/yarncache/react-npm-17.0.2-99ba37d931-b254cc17ce.zip/node_modules/react/jsx-runtime.js");const g={main:{icon:"grafana",text:"Invite",subTitle:"Register your Grafana account",breadcrumbs:[{title:"Login",url:"login"}]},node:{text:""}},h=e=>{let{match:a}=e;const s=a.params.code,[h,b]=(0,i.useState)(),[j,x]=(0,i.useState)(),[v,f]=(0,i.useState)();(0,t.Z)((async()=>{const e=await(0,l.getBackendSrv)().get(`/api/user/invite/${s}`);b({email:e.email,name:e.name,username:e.email}),x(e.name||e.email||e.username),f(e.invitedBy)}),[s]);return h?(0,p.jsx)(o.Z,{navModel:g,children:(0,p.jsxs)(o.Z.Contents,{children:[(0,p.jsxs)("h3",{className:"page-sub-heading",children:["Hello ",j||"there","."]}),(0,p.jsxs)("div",{className:"modal-tagline p-b-2",children:[(0,p.jsx)("em",{children:v||"Someone"})," has invited you to join Grafana and the organization"," ",(0,p.jsx)("span",{className:"highlight-word",children:u.Vt.user.orgName}),n||(n=(0,p.jsx)("br",{})),"Please complete the following and choose a password to accept your invitation and continue:"]}),(0,p.jsx)(c.Form,{defaultValues:h,onSubmit:async e=>{await(0,l.getBackendSrv)().post("/api/user/invite/complete",Object.assign({},e,{inviteCode:s})),window.location.href=(0,d.iE)().appSubUrl+"/"},children:e=>{let{register:a,errors:s}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.Field,{invalid:!!s.email,error:s.email&&s.email.message,label:"Email",children:(0,p.jsx)(c.Input,Object.assign({placeholder:"email@example.com"},a("email",{required:"Email is required",pattern:{value:m.Yb,message:"Email is invalid"}})))}),(0,p.jsx)(c.Field,{invalid:!!s.name,error:s.name&&s.name.message,label:"Name",children:(0,p.jsx)(c.Input,Object.assign({placeholder:"Name (optional)"},a("name")))}),(0,p.jsx)(c.Field,{invalid:!!s.username,error:s.username&&s.username.message,label:"Username",children:(0,p.jsx)(c.Input,Object.assign({},a("username",{required:"Username is required"}),{placeholder:"Username"}))}),(0,p.jsx)(c.Field,{invalid:!!s.password,error:s.password&&s.password.message,label:"Password",children:(0,p.jsx)(c.Input,Object.assign({},a("password",{required:"Password is required"}),{type:"password",placeholder:"Password"}))}),r||(r=(0,p.jsx)(c.Button,{type:"submit",children:"Sign up"}))]})}})]})}):null},b=h}}]);
//# sourceMappingURL=SignupInvited.e7c4f9b46d58a170d773.js.map